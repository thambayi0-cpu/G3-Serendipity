/***************************************************************************
* PROGRAMMED BY : Ahmer Yasin & Thokozile Hambayi
* ID            : A00349012   & 127485
* CLASS         : CS1B
* SECTION       : TTh 1:30pm
* MODULE        : 2
* GROUP PROJECT : 2
* PROGRAM NAME  : Menus (Navigation & Stubs)
* PURPOSE       : Bookstore POS
* DUE DATE      : 09/23/2025
****************************************************************************/

#include "format.h"
//#include "lookUpBook.h"
#include <string>
#include <iostream>
#include <vector>
#include "bookType.h"
using namespace std;

void lookUpBook (bool &keepInvMenuActive, bool &keepLookUpBookMenuActive, vector<bookType>& books)
{
	const string CLEAR_SCREEN = "\x1b[H\x1b[2J";
	string headingString;
	string searchString;
	string lowerSearchString;
	vector <string> titles;
	string titleEmpty;

	headingString = OutputClassHeading();

	cout << CLEAR_SCREEN;
	cout << headingString;

		for (int i = 0; i < int(books.size()); i++)
		{
			for (int j = 0; j < int(books[i].getTitle().length()); j++)
			{
				titleEmpty.push_back(char(tolower(books[i].getTitle()[j])));
			}
			titles.push_back(titleEmpty);
			titleEmpty.clear();
			cout << endl << titles[i] << endl;

		}


	do
	{
		cout << "Search: ";
		getline(cin, searchString);

		for (int i = 0; i < int(searchString.length()); i++)
		{
			lowerSearchString.push_back(char(tolower(searchString[i])));
		}

		if (lowerSearchString[1] == "-" && lowerSearchString[6] == "-" && lowerSearchString[11] == "-")
		{
			for (int i = 0; i < int(books.size()); i++)
			{
				if (titles.at(i).find(lowerSearchString) != string::npos)
					cout << "<" << i + 1 << "> " << books[i].getTitle() << endl << "True" << endl;
			}
		}



		for (int i = 0; i < int(books.size()); i++)
		{
			if (titles.at(i).find(lowerSearchString) != string::npos)
				cout << "<" << i + 1 << "> " << books[i].getTitle() << endl << "True" << endl;
		}

		lowerSearchString.clear();



	} while(keepLookUpBookMenuActive);
}

